# AGENTS.md

## Язык общения и контент

❗ Агент **всегда должен отвечать на русском языке**.

Обязательные требования:

- Все пояснения, комментарии и ответы — **только на русском**.
- При вёрстке UI-контента **использовать только русские слова и формулировки**:
  - кнопки  
  - заголовки  
  - плейсхолдеры  
  - сообщения об ошибках  
  - тултипы  
- Запрещено использовать английские слова в пользовательском интерфейсе, если нет прямой технической необходимости (например, название API, библиотеки, типа).

Если в задаче явно требуется другой язык — это должно быть **прямо указано пользователем**.

## Роль агента

TypeScript/JavaScript full-stack.

Твои цели:

- Вносить минимальные, но законченные изменения.
- Сохранять и улучшать качество кода.
- Строго соблюдать проверки: **тесты → Biome → TypeScript typecheck**.
- Использовать **shadcn/ui MCP** для UI.
- Использовать **Zod как основной источник типов**.
- Соблюдать архитектурный принцип **LIFT**.

Если требования задачи не полностью ясны — сформулируй предположения в начале ответа и действуй исходя из них.

---

## Обязательные проверки перед завершением любой задачи

### Порядок всегда фиксированный:

1. ✅ Написать или обновить тесты  
2. ✅ Запустить тесты  
3. ✅ Запустить Biome (lint + format)  
4. ✅ Запустить TypeScript typecheck  

❌ Запрещено оставлять:
- падающие тесты;
- ошибки Biome;
- ошибки `tsc` / typecheck.

Если что-то невозможно запустить — **обязательно явно описать причину и точные ошибки**.

---

## Biome — единственный источник форматирования и линтинга

### Обязанности:

- Найти конфиг: `biome.json`, `biome.jsonc`, `biome.config.*`
- Предпочитать команды из `package.json`:
  - `pnpm biome`, `pnpm lint`, `pnpm format`
  - `npm run biome`, `npm run lint`, `npm run format`
- Если нет скриптов, использовать:
  - `npx biome check .`
  - `npx biome check --write .`

### Правила:

- Biome всегда запускается **после изменений**.
- Все автоисправления должны быть применены.
- Оставшиеся ошибки исправляются вручную.
- Код **подстраивается под Biome**, а не наоборот.

В ответе всегда указывать:

- какую команду запускал;
- итог: `Biome: ✅` или список ошибок.

---

## TypeScript typecheck — обязателен

- Использовать скрипт из `package.json`:
  - `pnpm typecheck` / `npm run typecheck`
- Если его нет:
  - `npx tsc --noEmit`

### Запрещено:

- `any`
- `@ts-ignore`
- пустые касты без причины

Допускается ТОЛЬКО если:

- есть объяснение в комментарии;
- нет альтернативы.

В ответе:

- команда;
- результат: `Typecheck: ✅` или список ошибок.

---

## Тесты — обязательны

### Обязанности:

- Любая новая или изменённая логика **обязана иметь тесты**.
- Использовать существующий тестовый раннер:
  - `pnpm test`, `pnpm vitest`, `pnpm jest`, `npm test` и т.п.
- Тестировать:
  - happy-path,
  - ошибки,
  - граничные случаи.

В ответе всегда:

- команда;
- статус: `Tests: ✅` или список падающих тестов.

---

# Zod — основной источник типов (Schema First)

### Главный принцип:

> ❗ **Сначала Zod-схема → затем тип через `z.infer`**

```ts
import { z } from "zod"

export const UserSchema = z.object({
  id: z.string().uuid(),
  email: z.string().email(),
})

export type User = z.infer<typeof UserSchema>
