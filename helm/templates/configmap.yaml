apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "feature-flags-backend.fullname" . }}-config
  labels:
    {{- include "feature-flags-backend.labels" . | nindent 4 }}
data:
  # Режим работы
  NODE_ENV: "production"
  PORT: {{ .Values.config.port | quote }}
  AUTH_MODE: {{ .Values.config.authMode | quote }}
  LOG_LEVEL: {{ .Values.config.logLevel | quote }}

  # CORS
  CORS_ORIGINS: {{ .Values.config.corsOrigins | quote }}

  # Rate Limiting
  RATE_LIMIT_WINDOW_MS: {{ .Values.config.rateLimitWindowMs | quote }}
  RATE_LIMIT_MAX_REQUESTS: {{ .Values.config.rateLimitMaxRequests | quote }}
  RATE_LIMIT_EVALUATE_MAX: {{ .Values.config.rateLimitEvaluateMax | quote }}
  RATE_LIMIT_MUTATION_MAX: {{ .Values.config.rateLimitMutationMax | quote }}

  # Keycloak
  KEYCLOAK_URL: {{ .Values.keycloak.url | quote }}
  KEYCLOAK_REALM: {{ .Values.keycloak.realm | quote }}
  KEYCLOAK_CLIENT_ID: {{ .Values.keycloak.clientId | quote }}
  KEYCLOAK_ADMIN_ROLE: {{ .Values.keycloak.adminRole | quote }}

